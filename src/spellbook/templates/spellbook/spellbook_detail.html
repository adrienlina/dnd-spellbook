{% extends "base.html" %}

{% load staticfiles %}
{% load crispy_forms_tags %}
{% load absolute_url %}

{% block title %}{{ block.super }}Spellbook detail{% endblock %}

{% block styles %}
<link href="{% static 'site/css/forcepagescroll.css' %}" rel="stylesheet">
{% endblock %}

{% block navbar-left %}
  {% include "_navbar.html" with current_page_label='Spellbook detail' %}
{% endblock %}

{% block container %}
<div class="no-scroll-content">
  <div class="col-sm-12 height-full">
    <h3>Spellbook {{ spellbook.name }}: spells available</h3>
    <div class="small">
      Share link:
      <a href="{% absolute_url 'spellbook:spellbook-detail-view' spellbook.pk %}?token={{spellbook.token}}" target="_blank">
        {% absolute_url 'spellbook:spellbook-detail-view' spellbook.pk %}?token={{spellbook.token}}
      </a>
    </div>
    <div class="row">
      {% for spell_level, spells in spells_by_level.items %}
        <div class="col-sm-3 spell-level-column">
          <h4>{{ spells.0.level_as_dnd_format }}</h4>
          <div class="row">
            {% for spell in spells %}
              <div class="col-sm-12 well">
                <h4>
                  {{ spell.name }} ({{ spell.level_as_dnd_format }})
                  {% if spell.is_prepared %}
                    <span class="pull-right glyphicon glyphicon-ok-circle" title="Spell prepared"></span>
                  {% endif %}
                </h4>
                <div class="row">
                  <div class="col-xs-6">
                    Type: {{ spell.cast_type }}
                  </div>
                  <div class="col-xs-6">
                    Range: {{ spell.spell_range }}
                  </div>
                </div>
                <p class="spell-description">{{ spell.description |safe }}</p>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock container %}
